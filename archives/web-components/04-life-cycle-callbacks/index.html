<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Life cycle callbacks test</title>
    <style>
      custom-square {
        margin: 20px;
      }
    </style>
    <script src="./index.js"></script>
  </head>
  <body>
    <h1>Life cycle callbacks test</h1>

    <div>
      <button class="add">Add custom-square to DOM</button>
      <button class="update">Update attributes</button>
      <button class="remove">Remove custom-square from DOM</button>
    </div>

    <script>
      const add = document.querySelector('.add');
      const update = document.querySelector('.update');
      const remove = document.querySelector('.remove');
      let square;

      update.disabled = true;
      remove.disabled = true;

      function random(min, max) {
        return Math.floor(Math.random() * (max - min + 1) + min);
      }

      add.onclick = function() {
        // Create a custom square element
        square = document.createElement('custom-square');
        square.setAttribute('l', '100');
        square.setAttribute('c', 'red');
        document.body.appendChild(square);

        update.disabled = false;
        remove.disabled = false;
        add.disabled = true;
      };

      update.onclick = function() {
        // Randomly update square's attributes
        square.setAttribute('l', random(50, 200));
        square.setAttribute('c', `rgb(${random(0, 255)}, ${random(0, 255)}, ${random(0, 255)})`);
      };

      remove.onclick = function() {
        // Remove the square
        document.body.removeChild(square);

        update.disabled = true;
        remove.disabled = true;
        add.disabled = false;
      };
    </script>
  </body>
</html>
